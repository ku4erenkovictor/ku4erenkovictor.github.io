;(function($){function OpenClose(options){this.options=$.extend({addClassBeforeAnimation:true,hideOnClickOutside:false,activeClass:'active',opener:'[data-opener]',slider:'[data-slide]',animSpeed:400,effect:'slide',event:'click'},options);this.init();}OpenClose.prototype={init:function(){if(this.options.holder){this.findElements();this.attachEvents();this.makeCallback('onInit',this);}},findElements:function(){this.holder=$(this.options.holder);this.opener=this.holder.find(this.options.opener);this.slider=this.holder.find(this.options.slider);},attachEvents:function(){var self=this;this.eventHandler=function(e){e.preventDefault();if(self.holder.hasClass(self.options.activeClass)){self.hideSlide();}else{self.showSlide();}};self.opener.on(self.options.event,this.eventHandler);if(self.options.event==='over'){self.opener.on('mouseenter',function(){self.showSlide();});self.holder.on('mouseleave',function(){self.hideSlide();});}self.outsideClickHandler=function(e){if(self.options.hideOnClickOutside){var target=$(e.target);if(!target.is(self.holder)&&!target.closest(self.holder).length){self.hideSlide();}}};if(this.holder.hasClass(this.options.activeClass)){$(document).on('click touchstart',self.outsideClickHandler);}else{this.slider.hide();}},showSlide:function(){var self=this;if(self.options.addClassBeforeAnimation){self.holder.addClass(self.options.activeClass);}$(document).on('click touchstart',self.outsideClickHandler);self.makeCallback('animStart',true);toggleEffects[self.options.effect].show({box:self.slider,speed:self.options.animSpeed,complete:function(){if(!self.options.addClassBeforeAnimation){self.holder.addClass(self.options.activeClass);}self.makeCallback('animEnd',true);}});},hideSlide:function(){var self=this;if(self.options.addClassBeforeAnimation){self.holder.removeClass(self.options.activeClass);}$(document).off('click touchstart',self.outsideClickHandler);self.makeCallback('animStart',false);toggleEffects[self.options.effect].hide({box:self.slider,speed:self.options.animSpeed,complete:function(){if(!self.options.addClassBeforeAnimation){self.holder.removeClass(self.options.activeClass);}self.makeCallback('animEnd',false);}});},destroy:function(){this.slider.css({display:''});this.opener.off(this.options.event,this.eventHandler);this.holder.removeClass(this.options.activeClass).removeData('OpenClose');$(document).off('click touchstart',this.outsideClickHandler);},makeCallback:function(name){if(typeof this.options[name]==='function'){var args=Array.prototype.slice.call(arguments);args.shift();this.options[name].apply(this,args);}}};var toggleEffects={slide:{show:function(o){o.box.stop(true).hide().slideDown(o.speed,o.complete);},hide:function(o){o.box.stop(true).slideUp(o.speed,o.complete);}},fade:{show:function(o){o.box.stop(true).hide().fadeIn(o.speed,o.complete);},hide:function(o){o.box.stop(true).fadeOut(o.speed,o.complete);}},none:{show:function(o){o.box.hide().show(0,o.complete);},hide:function(o){o.box.hide(0,o.complete);}}};$.fn.openClose=function(opt){return this.each(function(){jQuery(this).data('OpenClose',new OpenClose($.extend(opt,{holder:this})));});};}(jQuery));